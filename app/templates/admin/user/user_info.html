<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-name" content="focus" />
    <title>教学管理界面</title>
    <!-- ================= Favicon ================== -->
    <!-- Standard -->
    <!-- Styles -->
    <link href="../../../static/css/lib/calendar2/pignose.calendar.min.css" rel="stylesheet">
    <link href="../../../static/css/lib/chartist/chartist.min.css" rel="stylesheet">
    <link href="../../../static/css/lib/font-awesome.min.css" rel="stylesheet">
    <link href="../../../static/css/lib/themify-icons.css" rel="stylesheet">
    <link href="../../../static/css/lib/owl.carousel.min.css" rel="stylesheet" />
    <link href="../../../static/css/lib/owl.theme.default.min.css" rel="stylesheet" />
    <link href="../../../static/css/lib/weather-icons.css" rel="stylesheet" />
    <link href="../../../static/css/lib/menubar/sidebar.css" rel="stylesheet">
    <link href="../../../static/css/lib/bootstrap.min.css" rel="stylesheet">
    <link href="../../../static/css/lib/helper.css" rel="stylesheet">
    <link href="../../../static/css/style01.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <div class="sidebar sidebar-hide-to-small sidebar-shrink sidebar-gestures">
        <div class="nano">
            <div class="nano-content">
               <ul>
                    <div class="logo"><a href="index.html">
                        <span>Focus</span></a></div>

                    <li class="label">课程管理</li>
                    <li><a class="sidebar-sub-toggle"><i class="ti-bar-chart-alt"></i> 课程设置 <span
                                class="sidebar-collapse-icon ti-angle-down"></span></a>
                        <ul>
                            <li><a href="{{url_for('admin.adm_courses')}}">基本信息管理</a></li>
                            <li><a href="{{url_for('admin.sear_sec')}}">课程章节管理</a></li>
                        </ul>
                    </li>

                    <li><a href="{{url_for('admin.courses_talk_index')}}"><i class="ti-email"></i> 课程评价</a></li>

                    <li class="label">学习资源</li>
                    <li><a class="sidebar-sub-toggle"><i class="ti-layout"></i> 学习资源 <span
                                class="sidebar-collapse-icon ti-angle-down"></span></a>
                        <ul>
                            <li><a href="{{url_for('admin.res_index')}}">学习资源数据概述</a></li>
                            <li><a href="{{url_for('admin.adm_up_res')}}">学习资源上传</a></li>

                        </ul>
                    </li>
                    <li class="label">交流社区管理</li>
                     <li><a class="sidebar-sub-toggle"><i class="ti-layout"></i>交流社区管理  <span
                                class="sidebar-collapse-icon ti-angle-down"></span></a>
                        <ul>
                            <li><a href="{{url_for('admin.post_index')}}"><i class="ti-view-list-alt"></i>交流帖子管理</a></li>
                            <li><a href="{{url_for('admin.adm_comments_index')}}"><i class="ti-view-list-alt"></i>帖子评论管理</a></li>
                        </ul>
                    <li class="label">学员信息管理</li>
                    <li><a href="{{url_for('admin.adm_search_users')}}"><i class="ti-files"></i>学员基本信息 </a></li>
                    <li><a href="{{url_for('admin.user_sel_class')}}"><i class="ti-target"></i>学员学习信息 <span class="sidebar-collapse-icon "></span></a></li>
                    <li><a href="{{url_for('admin.output_user_info')}}"><i class="ti-file"></i>导出学生数据</a></li>
                    <li><a href="{{ url_for('admin.adm_logout')}}"><i class="ti-close"></i> 退出登录</a></li>
                </ul>
            </div>
        </div>
    </div>
    <!-- /# sidebar -->

    <div class="header">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12">
                    <div class="float-left">
                        <div class="hamburger sidebar-toggle">
                            <span class="line"></span>
                            <span class="line"></span>
                            <span class="line"></span>
                        </div>
                    </div>
                    <div class="float-right">
                        <div class="dropdown ">
                            <div class="header-icon" data-toggle="dropdown">
                                <span class="user-avatar">{{username}}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="content-wrap">
        <div class="main">
            <div class="container-fluid">
                <!-- /# row -->
                <section id="main-content">
                    <div class="row">

                             <div class="col-lg-4">
                            <div class="card">
                                <div class="stat-widget-one">
                                    <div class="stat-icon dib"><i class="ti-user color-primary border-primary"></i>
                                    </div>
                                    <div class="stat-content dib">
                                        <div class="stat-text">课程数量</div>
                                        <div class="stat-digit">{{num_courses}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                            <div class="col-lg-4">
                                <div class="card">
                                    <div class="stat-widget-one">
                                        <div class="stat-icon dib"><i class="ti-layout-grid2 color-pink border-pink"></i>
                                        </div>
                                        <div class="stat-content dib">
                                            <div class="stat-text">资源数量</div>
                                            <div class="stat-digit">{{num_resources}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="card">
                                    <div class="stat-widget-one">
                                        <div class="stat-icon dib"><i class="ti-link color-danger border-danger"></i></div>
                                        <div class="stat-content dib">
                                            <div class="stat-text">学员数量</div>
                                            <div class="stat-digit">{{num_user}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                    </div>
                    <div class="row">
                       <div class="col-lg-12">
                            <div class="card">
                                <div class="card-title pr">
                                    <div style="float:left">
                                        <h4>所有资源信息</h4>
                                    </div>
                                    <div class="ms-3 me-5 pe-5 " style="float:right" >
                                       <form class="d-flex" action="/adm_sea_posts" method="post">
                                           <input type="text" name="query" style="width: 60%;height:40px;float: right" class="form-control" placeholder="输入关键字,多关键字空格隔开">
                                            <button class="btn btn-outline-success " style="margin-left: 15px" type="submit">Search</button>
                                        </form>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table student-data-table m-t-20">
                                            <thead>
                                                <tr>
                                                    <th>用户id</th>
                                                    <th>用户姓名</th>
                                                    <th>用户密码</th>
                                                    <th>用户邮箱</th>
                                                    <th>用户头像</th>
                                                    <th>用户类型</th>
                                                    <th style=" text-align: left;">用户创建时间</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                            {% for row in  user_data %}
                                                <tr>
                                                    <td>{{row.user_id}}</td>
                                                    <td>{{row.username}}</td>
                                                    <td>{{row.password}}</td>
                                                    <td>{{row.email}}</td>
                                                    <td><img src="{{row.user_url}}" style="width: 35px; height: 35px; border-radius: 50%;" ></td>
                                                    <td>{{row.type}}</td>
                                                    <td>{{row.created_at}}</td>
                                                    <td>
                                                        <div class="btn-group">
                                                          <button type="button" class="btn btn-danger">操作</button>
                                                          <button type="button" class="btn btn-danger dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-expanded="false">
                                                            <span class="sr-only">操作</span>
                                                          </button>
                                                          <div class="dropdown-menu">
                                                            <a class="dropdown-item" href="#">删除</a>
                                                             <a class="dropdown-item" data-toggle="modal" data-target="#{{row.user_id}}">更新</a>
                                                        </div>
                                                  </div>
                                                    </td>
                                                     <div class="modal fade" id="{{row.user_id}}" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                                          <div class="modal-dialog">
                                                            <div class="modal-content">
                                                              <div class="modal-header">
                                                                <h5 class="modal-title" id="staticBackdropLabel">更新课程信息</h5>
                                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                  <span aria-hidden="true">&times;</span>
                                                                </button>
                                                              </div>
                                                              <div class="modal-body">
                                                               <form id="update_user_info" action="/update_user_info" method="post">
                                                                  <div>
                                                                    <label >用户id</label>
                                                                    <input type="text"  name="user_id" class="form-control" value="{{row.user_id}}"  readonly>
                                                                  </div>
                                                                  <div >
                                                                    <label >用户姓名</label>
                                                                    <input type="text" name="username" class="form-control"  value="{{row.username}}" readonly>
                                                                  </div>
                                                                    <div >
                                                                    <label >用户密码</label>
                                                                    <input type="text" name="password" class="form-control"  value="{{row.password}}" >
                                                                  </div>
                                                                    <div >
                                                                    <label >用户邮箱</label>
                                                                    <input type="text" name="email" class="form-control"  value="{{row.email}}" >
                                                                  </div>
                                                                    <div >
                                                                    <label >用户头像</label>
                                                                        <div style="height: 45px">
                                                                            <input type="file" name="user_url" value="{{row.user_url}}">
                                                                        </div>
                                                                  </div>
                                                                  <div>
                                                                    <label >用户类型</label>
                                                                      <div>
                                                                      <input type="radio" name="type"  value="普通学者" checked> 普通学者
                                                                       <input type="radio" name="type" value="管理员" checked> 管理员
                                                                      </div>
                                                                  </div>
                                                                  <div>
                                                                    <label >用户创建时间</label>
                                                                    <input type="text" name="created_at" class="form-control" value="{{row.created_at}}"  readonly>
                                                                  </div>
                                                                </form>
                                                              </div>
                                                              <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
                                                                <button  type="submit"  form="update_user_info" class="btn btn-primary">确认更新</button>
                                                              </div>
                                                            </div>
                                                          </div>
                                                        </div>

                                            {% endfor%}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                </div>
                        </div>
                        <!-- /# column -->
                    </div>
                    <!-- /# row -->
                </section>
            </div>
        </div>
    </div>
    <!-- jquery vendor -->
    <script src="../../../static/js/lib/jquery.min.js"></script>
    <script src="../../../static/js/lib/jquery.nanoscroller.min.js"></script>
    <!-- nano scroller -->
    <script src="../../../static/js/lib/menubar/sidebar.js"></script>
    <script src="../../../static/js/lib/preloader/pace.min.js"></script>
    <!-- sidebar -->

    <script src="../../../static/js/lib/bootstrap.min.js"></script>
    <script src="../../../static/js/scripts.js"></script>
    <!-- bootstrap -->

    <script src="../../../static/js/lib/calendar-2/moment.latest.min.js"></script>
    <script src="../../../static/js/lib/calendar-2/pignose.calendar.min.js"></script>
    <script src="../../../static/js/lib/calendar-2/pignose.init.js"></script>


    <script src="../../../static/js/lib/weather/jquery.simpleWeather.min.js"></script>
    <script src="../../../static/js/lib/weather/weather-init.js"></script>
    <script src="../../../static/js/lib/circle-progress/circle-progress.min.js"></script>
    <script src="../../../static/js/lib/circle-progress/circle-progress-init.js"></script>

    <script src="../../../static/js/lib/sparklinechart/jquery.sparkline.min.js"></script>
    <script src="../../../static/js/lib/sparklinechart/sparkline.init.js"></script>
    <script src="../../../static/js/lib/owl-carousel/owl.carousel.min.js"></script>
    <script src="../../../static/js/lib/owl-carousel/owl.carousel-init.js"></script>
    <!-- scripit init-->
    <script src="../../../static/js/dashboard2.js"></script>
</body>
</html>

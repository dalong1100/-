<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-name" content="focus" />
    <title>教学管理界面</title>
    <!-- ================= Favicon ================== -->
    <!-- Standard -->
    <!-- Styles -->
    <link href="../../../static/css/lib/calendar2/pignose.calendar.min.css" rel="stylesheet">
    <link href="../../../static/css/lib/chartist/chartist.min.css" rel="stylesheet">
    <link href="../../../static/css/lib/font-awesome.min.css" rel="stylesheet">
    <link href="../../../static/css/lib/themify-icons.css" rel="stylesheet">
    <link href="../../../static/css/lib/owl.carousel.min.css" rel="stylesheet" />
    <link href="../../../static/css/lib/owl.theme.default.min.css" rel="stylesheet" />
    <link href="../../../static/css/lib/weather-icons.css" rel="stylesheet" />
    <link href="../../../static/css/lib/menubar/sidebar.css" rel="stylesheet">
    <link href="../../../static/css/lib/bootstrap.min.css" rel="stylesheet">
    <link href="../../../static/css/lib/helper.css" rel="stylesheet">
    <link href="../../../static/css/style01.css" rel="stylesheet">
</head>

<body>

    <div class="sidebar sidebar-hide-to-small sidebar-shrink sidebar-gestures">
        <div class="nano">
            <div class="nano-content">
               <ul>
                    <div class="logo"><a href="index.html">
                        <span>Focus</span></a></div>

                    <li class="label">课程管理</li>
                    <li><a class="sidebar-sub-toggle"><i class="ti-bar-chart-alt"></i> 课程设置 <span
                                class="sidebar-collapse-icon ti-angle-down"></span></a>
                        <ul>
                            <li><a href="{{url_for('admin.adm_courses')}}">基本信息管理</a></li>
                            <li><a href="{{url_for('admin.sear_sec')}}">课程章节管理</a></li>
                        </ul>
                    </li>

                    <li><a href="{{url_for('admin.courses_talk_index')}}"><i class="ti-email"></i> 课程评价</a></li>

                    <li class="label">学习资源</li>
                    <li><a class="sidebar-sub-toggle"><i class="ti-layout"></i> 学习资源 <span
                                class="sidebar-collapse-icon ti-angle-down"></span></a>
                        <ul>
                            <li><a href="{{url_for('admin.res_index')}}">学习资源数据概述</a></li>
                            <li><a href="{{url_for('admin.adm_up_res')}}">学习资源上传</a></li>

                        </ul>
                    </li>
                    <li class="label">交流社区管理</li>
                     <li><a class="sidebar-sub-toggle"><i class="ti-layout"></i>交流社区管理  <span
                                class="sidebar-collapse-icon ti-angle-down"></span></a>
                        <ul>
                            <li><a href="{{url_for('admin.post_index')}}"><i class="ti-view-list-alt"></i>交流帖子管理</a></li>
                            <li><a href="{{url_for('admin.adm_comments_index')}}"><i class="ti-view-list-alt"></i>帖子评论管理</a></li>
                        </ul>
                    <li class="label">学员信息管理</li>
                    <li><a href="{{url_for('admin.adm_search_users')}}"><i class="ti-files"></i>学员基本信息 </a></li>
                    <li><a href="{{url_for('admin.user_sel_class')}}"><i class="ti-target"></i>学员学习信息 <span class="sidebar-collapse-icon "></span></a></li>
                    <li><a href="{{url_for('admin.output_user_info')}}"><i class="ti-file"></i>导出学生数据</a></li>
                    <li><a href="{{ url_for('admin.adm_logout')}}"><i class="ti-close"></i> 退出登录</a></li>
                </ul>
            </div>
        </div>
    </div>
    <!-- /# sidebar -->

    <div class="header">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12">
                    <div class="float-left">
                        <div class="hamburger sidebar-toggle">
                            <span class="line"></span>
                            <span class="line"></span>
                            <span class="line"></span>
                        </div>
                    </div>
                    <div class="float-right">
                        <div class="dropdown ">
                            <div class="header-icon" data-toggle="dropdown">
                                <span class="user-avatar">{{username}}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="content-wrap">
        <div class="main">
            <div class="container-fluid">
                <!-- /# row -->
                <section id="main-content"><div class="row">
                        <div class="col-lg-4">
                            <div class="card">
                                <div class="stat-widget-one">
                                    <div class="stat-icon dib"><i class="ti-user color-primary border-primary"></i>
                                    </div>
                                    <div class="stat-content dib">
                                        <div class="stat-text">课程数量</div>
                                        <div class="stat-digit">{{num_courses}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="card">
                                <div class="stat-widget-one">
                                    <div class="stat-icon dib"><i class="ti-layout-grid2 color-pink border-pink"></i>
                                    </div>
                                    <div class="stat-content dib">
                                        <div class="stat-text">资源数量</div>
                                        <div class="stat-digit">{{num_resources}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="card">
                                <div class="stat-widget-one">
                                    <div class="stat-icon dib"><i class="ti-link color-danger border-danger"></i></div>
                                    <div class="stat-content dib">
                                        <div class="stat-text">学员数量</div>
                                        <div class="stat-digit">{{num_user}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                       <div class="col-lg-12">
                            <div class="card">
                                <div class="card-title pr">
                                    <div style="float:left">
                                        <h4>管理帖子讨论区</h4>
                                    </div>
                                    <div class="ms-3 me-5 pe-5 " style="float:right" >
                                       <form class="d-flex" action="/sea_sec" method="post">
                                           <input type="text" name="value" style="width: 60%;height:40px;float: right" class="form-control" placeholder="输入关键字,多关键字空格隔开">
                                            <button class="btn btn-outline-success " style="margin-left: 15px" type="submit">Search</button>
                                        </form>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table student-data-table m-t-20">
                                            <thead>
                                                <tr>
                                                    <th>课程名称</th>
                                                    <th>章节操作</th>
                                            <tbody>
                                               {% for course_name, sections in courses.items() %}
                                                    <tr>
                                                        <td>{{course_name}}</td>
                                                        <td>
                                                            <div class="btn-group">
                                                              <button type="button" class="btn btn-danger">操作</button>
                                                              <button type="button" class="btn btn-danger dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-expanded="false">
                                                                <span class="sr-only">操作</span>
                                                              </button>
                                                              <div class="dropdown-menu">
                                                                <a class="dropdown-item" data-toggle="modal" data-target="#{{course_name}}" href="#">增加章节</a>
                                                                <a class="dropdown-item" data-toggle="modal"  data-target="#{{course_name}}01" href="#">更新、删除章节</a>
                                                                <a class="dropdown-item" href="/cla_dis/{{course_id}}/0">查看课程章节</a>
                                                            </div>
                                                      </div>
                                                        </td>
                                                        <!-- 更新弹出框 -->
                                                          <!-- 更新弹出框 -->
                                                        <div class="modal fade" id="{{course_name}}01" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                                              <div class="modal-dialog">
                                                                <div class="modal-content">
                                                                  <div class="modal-header">
                                                                    <h5 class="modal-title" id="staticBackdropLabel">更新章节信息</h5>
                                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                      <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                  </div>
                                                                  <div class="modal-body">
                                                                      {% for section in sections   %}
                                                                   <form id="update_course" action="/update_cour_sec/{{section.section_ID}}" method="post">
                                                                        <div class="accordion" id="accordionExample">
                                                                             <div class="card">
                                                                                <div class="card-header" id="headingThree">
                                                                                    <div>
                                                                                        <div style="float: left">
                                                                                             <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#{{ section.section_ID }}" aria-expanded="false" aria-controls="collapseThree">
                                                                                 第{{ section.section_num }}章： {{ section.section_name }}
                                                                                </button>
                                                                                         </div>
                                                                                        <div style="float: right">
                                                                                                <button class="btn btn-danger btn-sm">
                                                                                                    <a href="/del_cour_sec/{{section.section_ID}}">删除</a></button>
                                                                                        </div>
                                                                                 </div>
                                                                                    </div>

                                                                                 <div id="{{ section.section_ID }}" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
                                                                                  <div class="card-body">
                                                                                       <div>
                                                                                        <label >章节名称</label>
                                                                                        <input type="text"  name="sec_name" class="form-control" value="{{ section.section_name  }}" >
                                                                                      </div>
                                                                                      <div>
                                                                                        <label >章节描述</label>
                                                                                        <input type="text"  name="sec_desc" class="form-control" value="{{ section.section_des  }}" >
                                                                                      </div>
                                                                                      <div>
                                                                                        <label >章节预览</label>
                                                                                        <figure class="mb-30">
                                                                                            <video controls width="100%">
                                                                                                <source src="{{section.section_URL }}" type="video/mp4">
                                                                                            </video>
                                                                                        </figure>
                                                                                      </div>
                                                                                       <div>
                                                                                           <label >请选择要更新章节文件</label>
                                                                                           <div>
                                                                                              <select name="sec_file_name" id="fileSelect" required>
                                                                                                    <option value="" disabled selected>请选择一个文件</option>
                                                                                                    {% for file in files %}
                                                                                                        <option value="{{ file }}">{{ file }}</option>
                                                                                                    {% endfor %}
                                                                                                </select>
                                                                                           </div>
                                                                                      </div>

                                                                                  </div>
                                                                            </div>
                                                                        </div>
                                                                        </div>
                                                                      {%endfor%}
                                                                    </form>
                                                                  </div>
                                                                  <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
                                                                    <button  type="submit"  form="update_course" class="btn btn-primary">确认更新</button>
                                                                  </div>
                                                                </div>
                                                              </div>
                                                            </div>
<!--                                                        增加-->
                                                         <div class="modal fade" id="{{course_name}}" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel01" aria-hidden="true">
                                                          <div class="modal-dialog">
                                                            <div class="modal-content">
                                                              <div class="modal-header">
                                                                <h5 class="modal-title" id="staticBackdropLabel01">增加章节信息</h5>
                                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                  <span aria-hidden="true">&times;</span>
                                                                </button>
                                                              </div>
                                                              <div class="modal-body">
                                                               <form id="add_sec" action="/add_sec" method="post">
                                                                  <div>
                                                                    <label >课程名称</label>
                                                                    <input type="text"  name="course_name" class="form-control" value="{{ course_name }}"  readonly>
                                                                  </div>
                                                                  <div >
                                                                    <label >章节名称</label>
                                                                    <input type="text" name="sec_name" class="form-control"   >
                                                                  </div>
                                                                   <div>
                                                                    <label >章节资料</label>
                                                                    <input type="file" name="sec_res" class="form-control"  >
                                                                  </div>
                                                                  <div>
                                                                    <label >章节介绍</label>
                                                                    <input type="text" name="sec_desc" class="form-control" >
                                                                  </div>
                                                                </form>
                                                              </div>
                                                              <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
                                                                <button  type="submit"  form="add_sec" class="btn btn-primary">确认更新</button>
                                                              </div>
                                                            </div>
                                                          </div>
                                                    </tr>
                                            {% endfor%}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                </div>
                        </div>
                        <!-- /# column -->
                    </div>
                    <!-- /# row -->
                </section>
            </div>
        </div>
    </div>

    <!-- jquery vendor -->
    <script src="../../../static/js/lib/jquery.min.js"></script>
    <script src="../../../static/js/lib/jquery.nanoscroller.min.js"></script>
    <!-- nano scroller -->
    <script src="../../../static/js/lib/menubar/sidebar.js"></script>
    <script src="../../../static/js/lib/preloader/pace.min.js"></script>
    <!-- sidebar -->

    <script src="../../../static/js/lib/bootstrap.min.js"></script>
    <script src="../../../static/js/scripts.js"></script>
    <!-- bootstrap -->

    <script src="../../../static/js/lib/calendar-2/moment.latest.min.js"></script>
    <script src="../../../static/js/lib/calendar-2/pignose.calendar.min.js"></script>
    <script src="../../../static/js/lib/calendar-2/pignose.init.js"></script>


    <script src="../../../static/js/lib/weather/jquery.simpleWeather.min.js"></script>
    <script src="../../../static/js/lib/weather/weather-init.js"></script>
    <script src="../../../static/js/lib/circle-progress/circle-progress.min.js"></script>
    <script src="../../../static/js/lib/circle-progress/circle-progress-init.js"></script>

    <script src="../../../static/js/lib/sparklinechart/jquery.sparkline.min.js"></script>
    <script src="../../../static/js/lib/sparklinechart/sparkline.init.js"></script>
    <script src="../../../static/js/lib/owl-carousel/owl.carousel.min.js"></script>
    <script src="../../../static/js/lib/owl-carousel/owl.carousel-init.js"></script>
    <!-- scripit init-->
    <script src="../../../static/js/dashboard2.js"></script>
</body>
<script>
        $('#myModal').on('shown.bs.modal', function () {
  $('#myInput').trigger('focus')
})
    </script>
<script>

</script>
</html>
